

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting started &mdash; saspy 3.7.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="saspy 3.7.3 documentation" href="index.html"/>
        <link rel="next" title="API Reference" href="api.html"/>
        <link rel="prev" title="Installation and configuration" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> saspy
          

          
          </a>

          
            
            
              <div class="version">
                3.7.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#initial-import">Initial import</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-a-sas-session">Start a SAS session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-data-into-sas">Load data into SAS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#csv">CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pandas-dataframe">Pandas DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="#existing-sas-data-set">Existing SAS data set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#explore-the-data">Explore the data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-the-variables">List the variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-the-first-observations">See the first observations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-of-numeric-columns">Summary of numeric columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-bar-chart">Basic bar chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-histogram">Basic histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-heatmap">Basic heatmap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submit-sas-code-directly-from-python-session">Submit SAS code directly from Python session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#split-the-data-into-training-and-test">Split the data into training and test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-an-analytical-model">Build an analytical model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#more-about-the-target-and-input-parameters">More about the target and input parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#evaluating-model-diagnostics">Evaluating model diagnostics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-topics.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding-procedures.html">Contributing new methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="limitations.html">Limitations, restrictions and work arounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">saspy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting-started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This is an interface module to the SAS System. It connects to SAS 9.4
(released July 2013) or newer and enables Python programmers to take
advantage of their licensed SAS infrastructure through Python 3.x.</p>
<p>The interface is designed to enable programmers to use Python
syntax and constructs to interact with SAS. The interface makes SAS the
analytical engine&#8211;or &#8220;calculator&#8221; for data analysis. In its most simple
form, it is a code translator that accepts Python commands and
converts them into SAS language statements. The statements are run,
and then the results are returned to Python to be displayed or accessed.</p>
<p>This is an open source project. Your contributions are appreciated
and encouraged. Please open issues in gitlab for problems that you see!</p>
<p>The rest of this section demonstrates how to use this module with a simple example.
The example uses <a class="reference external" href="https://www.kaggle.com/ludobenistant/hr-analytics">Kaggle Resources Analytics</a> data.</p>
<p>We now have a saspy-examples gityhub repo:
<a class="reference external" href="https://github.com/sassoftware/saspy-examples">https://github.com/sassoftware/saspy-examples</a></p>
<p>There are a number of example Jupyter notebooks there, some contributed by SAS
and others by users. If you have one you&#8217;d like to contribute, please open a pull request.</p>
<p>The saspy_example_github.ipynb notebook is a perfect one to look though first,
as it walks you through the various capabilities of saspy. You can even download it, and
then upload it into your Jupyter and run it. It uses SASHELP tables, so it should run
on your system already. You can edit it and play around with it directly on your system.
The direct link to it is: <a class="reference external" href="https://github.com/sassoftware/saspy-examples/blob/master/SAS_contrib/saspy_example_github.ipynb">https://github.com/sassoftware/saspy-examples/blob/master/SAS_contrib/saspy_example_github.ipynb</a></p>
<div class="section" id="initial-import">
<h2>Initial import<a class="headerlink" href="#initial-import" title="Permalink to this headline">¶</a></h2>
<p>It is assumed you have already done the <a class="reference internal" href="install.html"><span class="doc">installation and configuration</span></a>.
If you have not, refer to that section for more information.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">saspy</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
<div class="section" id="start-a-sas-session">
<h2>Start a SAS session<a class="headerlink" href="#start-a-sas-session" title="Permalink to this headline">¶</a></h2>
<p>In the following code we start a SAS session named <code class="docutils literal"><span class="pre">sas</span></code> using the default
configuration. Each SAS session is a connection to a separate SAS instance.
The cfgname parameter specifies the configuration definition (in sascfg_personal.py)
to use for the connection to SAS.</p>
<p>If sascfg_personal.py has only one connection definition, then you do not need to
specify the cfgname parameter. If the file has more than one connection
definition and you do not specify the one to use with cfgname, you are
prompted for the connection to use.</p>
<p>After a connection is made and a SAS session is started, a note that is
similar to the the one below is displayed.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">sas</span> <span class="o">=</span> <span class="n">saspy</span><span class="o">.</span><span class="n">SASsession</span><span class="p">(</span><span class="n">cfgname</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SAS</span> <span class="n">Connection</span> <span class="n">established</span><span class="o">.</span> <span class="n">Subprocess</span> <span class="nb">id</span> <span class="ow">is</span> <span class="mi">28207</span>
</pre></div>
</div>
<p>Any of the keys in the configuration definition can be supplied as parameters
on the SASsession() method. This allows you to change these values at run time,
without having to edit the configuration file. However, whether you are allowed
to override keys that are defined in the config def, is controlled by one of the
configuration options (also in the sascfg[_personal].py); lock_down. If lock_down
is True, the only keys you can supply as parameters on SASsession() are ones that
are not specified in the config def. If lock_down is False, any key can be specified
on the SASsession() method.</p>
<p>For instance, with lock_down set to False and the following config def, you can
override things at run time:</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">ssh</span>      <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;saspath&#39;</span> <span class="p">:</span> <span class="s1">&#39;/opt/sasinside/SASHome/SASFoundation/9.4/bin/sas_u8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ssh&#39;</span>     <span class="p">:</span> <span class="s1">&#39;/usr/bin/ssh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;host&#39;</span>    <span class="p">:</span> <span class="s1">&#39;remote.linux.host&#39;</span><span class="p">,</span>
            <span class="s1">&#39;options&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;-fullstimer&quot;</span><span class="p">]</span>
           <span class="p">}</span>


<span class="n">sas</span> <span class="o">=</span> <span class="n">saspy</span><span class="o">.</span><span class="n">SASsession</span><span class="p">(</span><span class="n">cfgname</span><span class="o">=</span><span class="s1">&#39;ssh&#39;</span><span class="p">,</span>
                       <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-fullstimer&quot;</span><span class="p">,</span> <span class="s2">&quot;-autoexec&quot;</span><span class="p">,</span> <span class="s2">&quot;/home/my.autoexec.sas&quot;</span><span class="p">],</span>
                       <span class="n">host</span><span class="o">=</span><span class="s2">&quot;&#39;other.host.with.sas&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="load-data-into-sas">
<h2>Load data into SAS<a class="headerlink" href="#load-data-into-sas" title="Permalink to this headline">¶</a></h2>
<p>Data can be loaded easily from many sources. The following examples show
the most common methods. In each case, <code class="docutils literal"><span class="pre">hr</span></code> is a SASdata object that
represents a SAS data set.</p>
<div class="section" id="csv">
<h3>CSV<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<p>In the following example, the CSV file is accessible to Python. The
<code class="docutils literal"><span class="pre">sas</span></code> object reads the CSV file and creates a SAS data set in the
SAS session.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./HR_comma_sep.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pandas-dataframe">
<h3>Pandas DataFrame<a class="headerlink" href="#pandas-dataframe" title="Permalink to this headline">¶</a></h3>
<p>In the following example, the CSV file is accessible to Python. First,
the CSV file is read into a data frame. Then the <code class="docutils literal"><span class="pre">sas</span></code> object
reads the data frame and creates a SAS data set in the SAS session.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr_pd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./HR_comma_sep.csv&quot;</span><span class="p">)</span>
<span class="n">hr</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">df2sd</span><span class="p">(</span><span class="n">hr_pd</span><span class="p">)</span>  <span class="c1"># the short form of: hr = sas.dataframe2sasdata(hr_pd)</span>
</pre></div>
</div>
</div>
<div class="section" id="existing-sas-data-set">
<h3>Existing SAS data set<a class="headerlink" href="#existing-sas-data-set" title="Permalink to this headline">¶</a></h3>
<p>In the following example, no data file is accessible to Python. An existing
SAS data set that is accessible to the SAS session is associated with the
<code class="docutils literal"><span class="pre">hr</span></code> object.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasdata</span><span class="p">(</span><span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;mylibref&#39;</span><span class="p">)</span>

<span class="c1"># or simply: hr = sas.sasdata(&#39;hr&#39;)</span>
<span class="c1"># ...if hr.sas7bdat is in your &#39;work&#39; or &#39;user&#39; library</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="explore-the-data">
<h2>Explore the data<a class="headerlink" href="#explore-the-data" title="Permalink to this headline">¶</a></h2>
<p>There are a number of tabular and graphical methods to view your data.
The following examples show common methods. See the <a class="reference internal" href="api.html"><span class="doc">API Reference</span></a> for a
complete list.</p>
<div class="section" id="list-the-variables">
<h3>List the variables<a class="headerlink" href="#list-the-variables" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">columnInfo</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="see-the-first-observations">
<h3>See the first observations<a class="headerlink" href="#see-the-first-observations" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="summary-of-numeric-columns">
<h3>Summary of numeric columns<a class="headerlink" href="#summary-of-numeric-columns" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">means</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-bar-chart">
<h3>Basic bar chart<a class="headerlink" href="#basic-bar-chart" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;salary&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-histogram">
<h3>Basic histogram<a class="headerlink" href="#basic-histogram" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">&#39;last_evaluation&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-heatmap">
<h3>Basic heatmap<a class="headerlink" href="#basic-heatmap" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="s1">&#39;last_evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;satisfaction_level&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="submit-sas-code-directly-from-python-session">
<h2>Submit SAS code directly from Python session<a class="headerlink" href="#submit-sas-code-directly-from-python-session" title="Permalink to this headline">¶</a></h2>
<p>The proceeding examples demonstrate commonly used Python
methods that are available with this module.</p>
<p>If you encounter a situation where you need to submit SAS
statements directly to the SAS system, you can use any of the 3 submit* methods
to accomplish that. The following example creates a side-by-side
panel plot to compare employees who have left versus employees
still working at the company, based on their business unit,
median performance rating, and satisfaction level.</p>
<p>The submit method returns a dictionary with two keys: LOG and LST.
You can print() the LOG and sas.HTML() the LST. Or you can use the
submitLST() method or the submitLOG() methods which automatically
render the respective output for you.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">submitLST</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">proc sgpanel data=work._csv;</span>
<span class="s2">    PANELBY left;</span>
<span class="s2">    hbar sales / response=last_evaluation    stat=median;</span>
<span class="s2">    hbar sales / response=satisfaction_level stat=median;</span>
<span class="s2">run;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="split-the-data-into-training-and-test">
<h2>Split the data into training and test<a class="headerlink" href="#split-the-data-into-training-and-test" title="Permalink to this headline">¶</a></h2>
<p>Partitioning data is essential to avoid overfitting during
model development. This can be achieved using the partition
method. In this example, the data is partitioned in-place
and performs stratified sampling, based on the variable
&#8216;left.&#8217; If you do not specify a variable or the variable
is an interval, then simple random sampling (SRS) is done.</p>
<p>We create two partitions: test and training.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">hr_train</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;_PartInd_=1&#39;</span><span class="p">)</span>
<span class="n">hr_test</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;_PartInd_=0&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="build-an-analytical-model">
<h2>Build an analytical model<a class="headerlink" href="#build-an-analytical-model" title="Permalink to this headline">¶</a></h2>
<p>One of the key activities for this module is analytical modeling. The SAS
system is capable of modeling in a number of distinct areas
(statistics, machine learning, econometric time series, and so on).</p>
<p>These capabilities are organized similarly to make it easier
for users. Grouping functionality also avoids cluttered tab-complete
lists with methods that you might not have licensed.</p>
<p>The session object has methods to create an instance for each supported
product.</p>
<ul class="simple">
<li>STAT (SAS/STAT)</li>
<li>ETS (SAS/ETS)</li>
<li>Machine learning (SAS Enterprise Miner)</li>
<li>QC (SAS/QC)</li>
<li>UTIL (SAS Base procedures)</li>
</ul>
<p>Here is a code example to create an object for each product:</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">stat</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasstat</span><span class="p">()</span>
<span class="n">ml</span>   <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasml</span><span class="p">()</span>
<span class="n">ets</span>  <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasets</span><span class="p">()</span>
<span class="n">qc</span>   <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasqc</span><span class="p">()</span>
<span class="n">util</span> <span class="o">=</span> <span class="n">sas</span><span class="o">.</span><span class="n">sasutil</span><span class="p">()</span>
</pre></div>
</div>
<p>Each of these objects contains a set of methods that perform analytical
functions, namely modeling. These methods closely follow the SAS procedures
for naming and organization.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The existing list of methods is not an exhaustive list of the
SAS procedures that are available with each product. Please
consider contributing the methods you&#8217;ve written to do your work.</p>
</div>
<p>The <a class="reference internal" href="api.html"><span class="doc">API Reference</span></a> documentation shows how to add a method that corresponds to
a SAS procedure. The API has a complete list of methods for each object.</p>
<p>You can use the <code class="docutils literal"><span class="pre">dir()</span></code> function to see a list of the available methods.
For example, <code class="docutils literal"><span class="pre">dir(stat)</span></code> provides a list of the methods that are available.
<strong>Not</strong> all of the methods correspond to a procedure but the vast majority do.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">stat</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__dir__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__eq__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__format__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ge__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span> <span class="s1">&#39;__gt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__hash__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span> <span class="s1">&#39;__le__&#39;</span><span class="p">,</span> <span class="s1">&#39;__lt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ne__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span>  <span class="s1">&#39;__repr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span> <span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;__subclasshook__&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span>
 <span class="s1">&#39;glm&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hplogistic&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hpreg&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hpsplit&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logger&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logistic&#39;</span><span class="p">,</span>
 <span class="s1">&#39;mixed&#39;</span><span class="p">,</span>
 <span class="s1">&#39;reg&#39;</span><span class="p">,</span>
 <span class="s1">&#39;sas&#39;</span><span class="p">,</span>
 <span class="s1">&#39;sasproduct&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpspline&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To build a model, you need to supply the required parameters to the modeling
method. I&#8217;ll start with an example then explain the syntax. We&#8217;ll continue
using the HR data from above.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">t1</span><span class="o">=</span><span class="s1">&#39;left&#39;</span>

<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;nominal&#39;</span><span class="p">:[</span><span class="s1">&#39;work_accident&#39;</span><span class="p">,</span><span class="s1">&#39;promotion_last_5years&#39;</span><span class="p">,</span><span class="s1">&#39;sales&#39;</span><span class="p">,</span><span class="s1">&#39;salary&#39;</span><span class="p">],</span>
   <span class="s1">&#39;interval&#39;</span><span class="p">:[</span><span class="s1">&#39;satisfaction_level&#39;</span><span class="p">,</span><span class="s1">&#39;last_evaluation&#39;</span><span class="p">,</span><span class="s1">&#39;number_project&#39;</span><span class="p">,</span><span class="s1">&#39;average_montly_hours&#39;</span><span class="p">,</span><span class="s1">&#39;time_spend_company&#39;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">rf_model</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">forest</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hr</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
<p>The preceding code creates two variables:</p>
<dl class="docutils">
<dt>t1</dt>
<dd>A string that represents the target variable.</dd>
<dt>inputs</dt>
<dd>A dictionary that represents the model inputs with two keys&#8211;interval and
nominal&#8211;which represent the interval and nominal variables respectively
to consider for modeling.</dd>
</dl>
<p>Here is another way to specify the same as above&#8211;using the nominal parameter
and a list of inputs. The target variable is now a dictionary.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">t1</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;nominal&#39;</span><span class="p">:</span><span class="s1">&#39;left&#39;</span><span class="p">}</span>

<span class="n">nom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;work_accident&#39;</span><span class="p">,</span> <span class="s1">&#39;promotion_last_5years&#39;</span><span class="p">,</span> <span class="s1">&#39;sales&#39;</span><span class="p">,</span> <span class="s1">&#39;salary&#39;</span><span class="p">]</span>

<span class="n">inputs</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;work_accident&#39;</span><span class="p">,</span> <span class="s1">&#39;promotion_last_5years&#39;</span><span class="p">,</span> <span class="s1">&#39;sales&#39;</span><span class="p">,</span> <span class="s1">&#39;salary&#39;</span><span class="p">,</span> <span class="s1">&#39;satisfaction_level&#39;</span><span class="p">,</span>
         <span class="s1">&#39;last_evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;number_project&#39;</span><span class="p">,</span> <span class="s1">&#39;average_montly_hours&#39;</span><span class="p">,</span> <span class="s1">&#39;time_spend_company&#39;</span><span class="p">]</span>

<span class="n">rf_model</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">forest</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hr</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">nominals</span> <span class="o">=</span> <span class="n">nom</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is another way&#8211;using the nominal parameter and a string of inputs. The
target is a list (nominals must be a list).</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">t1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span>

<span class="n">nom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;work_accident&#39;</span><span class="p">,</span> <span class="s1">&#39;promotion_last_5years&#39;</span><span class="p">,</span> <span class="s1">&#39;sales&#39;</span><span class="p">,</span> <span class="s1">&#39;salary&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">]</span>

<span class="n">inputs</span> <span class="o">=</span><span class="s1">&#39;work_accident promotion_last_5years sales salary satisfaction_level last_evaluation number_project</span>
        <span class="n">average_montly_hours</span> <span class="n">time_spend_company</span><span class="s1">&#39;</span>

<span class="n">rf_model</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">forest</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hr</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">nominals</span> <span class="o">=</span> <span class="n">nom</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="more-about-the-target-and-input-parameters">
<h3>More about the target and input parameters<a class="headerlink" href="#more-about-the-target-and-input-parameters" title="Permalink to this headline">¶</a></h3>
<p>These rules apply to both target and input:</p>
<ul class="simple">
<li>The parameters accept strings (str), lists (list), or dictionaries (dict) types.</li>
<li>The target and input parameters are modified by a nominals parameter to
identify the proper variables treatment.</li>
<li>The nominals parameter must be a list type or you receive a syntax warning.</li>
<li>Variables are treated as nominals if any of the following are met:<ul>
<li>The variable is a character type in SAS.</li>
<li>The variable is specified in the nominals list.</li>
<li>The variable is paired with dictionary key <code class="docutils literal"><span class="pre">'nominal'</span></code>.</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a variable is a SAS character type then it does not need to be
specified in the nominals parameter but does need to be assigned
to the <code class="docutils literal"><span class="pre">'nominal'</span></code> dictionary key if you use the dictionary
object type.</p>
</div>
</div>
</div>
<div class="section" id="evaluating-model-diagnostics">
<h2>Evaluating model diagnostics<a class="headerlink" href="#evaluating-model-diagnostics" title="Permalink to this headline">¶</a></h2>
<p>Perhaps the most important part of modeling is evaluating the quality of the
model. This is made very easy by leveraging the rich graphical and tabular
output of <a class="reference external" href="http://support.sas.com/rnd/base/ods/">SAS ODS</a>.</p>
<p>The output of a model in is a <a class="reference internal" href="api.html#saspy.sasresults.SASresults" title="saspy.sasresults.SASresults"><code class="xref any py py-class docutils literal"><span class="pre">SASresults</span></code></a> object. It contains all
the ODS tables and graphics that were produced by the SAS procedure. You can
see all the available objects by using <code class="docutils literal"><span class="pre">dir()</span></code> or tab-complete on the object.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">rf_model</span><span class="p">)</span>
</pre></div>
</div>
<p>The returned list shows the available diagnostic output for this model. The
output lists vary slightly, depending on the modeling algorithm, the settings,
and the target type (nominal or interval).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;BASELINE&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DATAACCESSINFO&#39;</span><span class="p">,</span>
 <span class="s1">&#39;FITSTATISTICS&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOG&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MODELINFO&#39;</span><span class="p">,</span>
 <span class="s1">&#39;NOBS&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PERFORMANCEINFO&#39;</span><span class="p">,</span>
 <span class="s1">&#39;VARIABLEIMPORTANCE&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To view a particular diagnostic, submit it as shown below. The default objects
for tables are Pandas DataFrames and for plots are HTML graphics. You can use
use the <code class="docutils literal"><span class="pre">results</span></code> option to choose HTML for tables too, if you choose.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">rf_model</span><span class="o">.</span><span class="n">FITSTATISTICS</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an error occurred during processing, the only artifact is ERROR_LOG.
This object contains the SAS log to aid you in resolving your error.</p>
</div>
<p>Below is an example where the variable name left is typed incorrectly as lefty.</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">rf_model</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">forest</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hr</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;lefty&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">nominals</span> <span class="o">=</span> <span class="n">nom</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SubmissionError</span><span class="p">:</span> <span class="n">ERRORS</span> <span class="n">found</span> <span class="ow">in</span> <span class="n">SAS</span> <span class="n">log</span><span class="p">:</span>
<span class="n">ERROR</span><span class="p">:</span> <span class="n">Variable</span> <span class="n">LEFTY</span> <span class="ow">not</span> <span class="n">found</span><span class="o">.</span>
</pre></div>
</div>
<p>We can see a brief detail of the error but if more context is needed, you can
see the entire log for the model submission with code like the following:</p>
<div class="highlight-ipython3"><div class="highlight"><pre><span></span><span class="n">rf_model</span><span class="o">.</span><span class="n">ERROR_LOG</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Installation and configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 SAS Institute Inc. All Rights Reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.7.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>